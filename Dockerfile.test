FROM node:14-alpine

WORKDIR /app

# העתק קבצי package.json ו-package-lock.json תחילה
# זה משפר את ניצול המטמון של דוקר בבניות חוזרות
COPY package*.json ./

# התקן תלויות
RUN npm install

# העתק את שאר קוד המקור
COPY . .

# הרץ את הבדיקות
CMD ["npm", "test", "--", "--watchAll=false"]