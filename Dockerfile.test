FROM node:14-alpine

WORKDIR /app

# התקן את הכלים הדרושים לבניית node-sass
RUN apk add --no-cache --virtual .gyp python3 make g++

# העתק קבצי package.json ו-package-lock.json
COPY package*.json ./

# התקן תלויות
RUN npm install

# העתק את שאר קוד המקור
COPY . .

# הרץ את הבדיקות
CMD ["npm", "test", "--", "--watchAll=false"]